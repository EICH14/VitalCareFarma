<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="pagina para hacer citas medicas en VitalCareFarma">
  <title>Hacer una Cita</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="hacer-cita">

<header id="site-header">
  <div class="header-content">
    <div class="logo-area">
      <img src="Vital.ico" alt="Logo Vital Care" class="logo">
      <a href="home.html" class="logo-link"><h1>Vital Care</h1></a>
      <br>
      <div class="hamburger" id="hamburger">&#9776; Menú</div>
      <div id="menu">
        <a href="home.html">Inicio</a><br>
        <a href="hacer-cita.html">Hacer citas</a><br>
        <a href="ver-citas.html">Ver Citas</a>
      </div>
      <script>
        document.getElementById("hamburger").addEventListener("click", function () {
          const menu = document.getElementById("menu");
          menu.style.display = menu.style.display === "block" ? "none" : "block";
        });
      </script>
    </div>

    <div class="contact-info">
      <p><strong>Tel:</strong> <a href="tel:+5072667907">2667907</a></p>
      <p><strong>Correo:</strong> <a href="mailto:vitalcare3@gmail.com">vitalcare3@gmail.com</a></p>
    </div>
  </div>
</header>

<div class="container">
  <main>
    <h2>Reservar Cita</h2>

    <form id="formCita" aria-label="Formulario para reservar cita médica">
      <label for="especialidad">Especialidad</label>
      <select id="especialidad" name="especialidad" required>
        <option value="">Seleccione</option>
        <option value="Dermatología">Dermatología</option>
        <option value="Medicina General">Medicina General</option>
      </select>

      <label for="medico">Médico</label>
      <select id="medico" name="medico" required>
        <option value="">Seleccione</option>
      </select>

      <label for="horario">Horario</label>
      <select id="horario" name="horario" required>
        <option value="">Seleccione</option>
        <option value="AM">AM</option>
        <option value="PM">PM</option>
      </select>

      <label for="habitacion">Habitación</label>
      <input type="text" id="habitacion" name="habitacion" readonly>

      <label for="tipo">Tipo de cita</label>
      <select id="tipo" name="tipo" required>
        <option value="">Seleccione</option>
        <option value="Nueva">Nueva</option>
        <option value="Control">Control</option>
      </select>

      <button type="submit">Agendar</button>
      <div id="msgCita" aria-live="polite"></div>
    </form>
  </main>
</div>

<script>
  const medicosPorEspecialidad = {
    "Dermatología": ["Dra. Gómez", "Dr. Ruiz"],
    "Medicina General": ["Dr. Díaz", "Dra. Mejía"]
  };

  const datosMedico = {
    "Dra. Gómez": { horario: "AM", habitacion: "101" },
    "Dr. Ruiz": { horario: "PM", habitacion: "102" },
    "Dr. Díaz": { horario: "AM", habitacion: "201" },
    "Dra. Mejía": { horario: "PM", habitacion: "202" }
  };

  const especialidadSelect = document.getElementById("especialidad");
  const medicoSelect = document.getElementById("medico");
  const horarioSelect = document.getElementById("horario");
  const habitacionInput = document.getElementById("habitacion");
  const formCita = document.getElementById("formCita");
  const msgCita = document.getElementById("msgCita");

  especialidadSelect.addEventListener("change", () => {
    const especialidad = especialidadSelect.value;
    medicoSelect.innerHTML = '<option value="">Seleccione</option>';
    if (especialidad && medicosPorEspecialidad[especialidad]) {
      medicosPorEspecialidad[especialidad].forEach((med) => {
        const opt = document.createElement("option");
        opt.value = med;
        opt.textContent = med;
        medicoSelect.appendChild(opt);
      });
    }
  });

  medicoSelect.addEventListener("change", () => {
    const medico = medicoSelect.value;
    if (datosMedico[medico]) {
      horarioSelect.value = datosMedico[medico].horario;
      habitacionInput.value = datosMedico[medico].habitacion;
    } else {
      horarioSelect.value = "";
      habitacionInput.value = "";
    }
  });

  formCita.addEventListener("submit", (e) => {
    e.preventDefault();
    const usuario = JSON.parse(localStorage.getItem("usuarioActual"));
    if (!usuario) {
      alert("Debes iniciar sesión.");
      return;
    }

    const cita = {
      cedula: usuario.cedula,
      nombre: usuario.nombre,
      especialidad: especialidadSelect.value,
      medico: medicoSelect.value,
      horario: horarioSelect.value,
      habitacion: habitacionInput.value,
      tipo: document.getElementById("tipo").value,
      fechaReserva: new Date().toLocaleString()
    };

    const citas = JSON.parse(localStorage.getItem("citas") || "[]");
    citas.push(cita);
    localStorage.setItem("citas", JSON.stringify(citas));

    msgCita.textContent = "¡Cita agendada exitosamente!";
    formCita.reset();
    medicoSelect.innerHTML = '<option value="">Seleccione</option>';
    habitacionInput.value = "";
  });
</script>

<footer id="site-footer">
  <div class="footer-content">
    <div class="footer-contact">
      <p><strong>Tel:</strong> <a href="tel:+5072667907">2667907</a></p>
      <p><strong>Correo:</strong> <a href="mailto:vitalcare3@gmail.com">vitalcare3@gmail.com</a></p>
    </div>
    <div class="footer-links">
      <p><a href="#">Políticas del Hospital</a></p>
      <div class="social">
        <a href="#"><i class="fab fa-whatsapp"></i> WhatsApp</a>
        <a href="#"><i class="fab fa-instagram"></i> Instagram</a>
      </div>
    </div>
  </div>
</footer>

</body>
</html>
